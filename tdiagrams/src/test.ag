{type Delta = Int}
data Index
    | Start
    | Next prev :: Index today :: {Delta}

attr Index
    syn rate :: {Int}
    syn lowest :: {Int}
    syn highest :: {Int}

sem Index
    | Start lhs.(rate,lowest,highest) = (0,0,0)
    | Next loc.rate = @prev.rate + @today
           loc.lowest = @prev.lowest `min` @loc.rate
           loc.profit = @loc.rate - @loc.lowest
           lhs.highest = @prev.highest `max` @loc.profit